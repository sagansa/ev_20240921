{
    "conflicts": [
        {
            "id": "e7dae77b-057b-481a-8763-f6c3400e104c",
            "currentContent": "<?php\n\nnamespace App\\Filament\\Resources\\Panel\\ChargeResource\\Pages;\n\nuse Filament\\Actions;\nuse Filament\\Resources\\Pages\\CreateRecord;\nuse App\\Filament\\Resources\\Panel\\ChargeResource;\nuse App\\Models\\Charge;\n\nclass CreateCharge extends CreateRecord\n{\n    protected static string $resource = ChargeResource::class;\n\n    public function mount(): void\n    {\n        parent::mount();\n\n        $this->form->fill([\n            'km_before' => 0,\n            'finish_charging_before' => 0,\n        ]);\n    }\n\n    protected function mutateFormDataBeforeCreate(array $data): array\n    {\n        $data['user_id'] = auth()->id();\n\n        $vehicleId = $data['vehicle_id'] ?? null;\n\n        if ($vehicleId) {\n            $data['km_before'] = ChargeResource::getLatestKmNowForVehicle($vehicleId);\n            $data['finish_charging_before'] = ChargeResource::getLatestChargingNowForVehicle($vehicleId);\n        }\n\n        return $data;\n    }\n\n    private function getLatestKmNowForVehicle($vehicleId)\n    {\n        $latestKm = Charge::where('vehicle_id', $vehicleId)\n            ->latest('date')\n            ->first();\n\n        return $latestKm ? $latestKm->km_now : 0;\n    }\n\n    private function getLatestChargingNowForVehicle($vehicleId)\n    {\n        $latestCharge = Charge::where('vehicle_id', $vehicleId)\n            ->latest('date')\n            ->first();\n\n        return $latestCharge ? $latestCharge->finish_charging_now : 0;\n    }\n\n}\n",
            "newContent": "<?php\n\nnamespace App\\Filament\\Resources\\Panel\\ChargeResource\\Pages;\n\nuse Filament\\Actions;\nuse Filament\\Resources\\Pages\\CreateRecord;\nuse App\\Filament\\Resources\\Panel\\ChargeResource;\n\nclass CreateCharge extends CreateRecord\n{\n    protected static string $resource = ChargeResource::class;\n}\n"
        }
    ]
}